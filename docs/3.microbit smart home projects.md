 ## Micro:bit Smart Home Projects

### Code Download

![top1](img/top1.png)

[DOWNLOAD](../Code.zip)

Download and unzip these files. Here all codes are in folder **Code**.

For convenience, <span style="color: rgb(2, 165, 180);">we move the codes into: **D:\Code\1.Code_kidsuno**.</span> You can also choose to move it into any disks at will. 

![bottom1](img/bottom1.png)



Congratulations! You've fully learned the micro:bit features and are ready to use them! This is a remarkable achievement, and I'm sure your enthusiasm for technology and your spirit of exploration must have contributed to it.

![z001](img/z001.png)

Next, we may wish to first understand the modules of smart homes, and you will better understand working principles and application scenarios. 

After this learning and accumulation, you will be able to design more innovative and practical smart home solutions. Let’s explore the smart home!



###  Single Sensor/Module Projects

#### Project 1: 6812 RGB LED Module

![KS6009](img/KS6009.png)

##### Introduction

![3top](img/3top.png)

RGB LED is imaged in the intersection of three primary colours (RGB): red, green and blue. Both white LED and RGB LED are able to emit white light. The former is presented directly in white, while the latter is mixed with red, green and blue.

![line3](img/line3.png)

**Trichromatic theory:**

![z101](img/z101.png)

Human eyes are sensitive to RGB colours. Most colours can be synthesized by RGB in different proportions. Therefore, the vast majority of monochromatic light can also be decomposed into RGB colours. This is the most basic principle of colorimetry --- trichromatic theory.

![line3](img/line3.png)

6812 RGB LED module is common-used which includes four independent and controllable RGB beads. Through digital signals, brightness and colour of them can be adjusted to realize various light effects. In application, it is widely used to decorative lighting, electronic display and entertainment equipment. All in all, this module is easy to control but with powerful functions.

In this project, we adopt 6812 RGB module to emit blue light.

![3bottom](img/3bottom.png)



##### Components

| Name                 | Picture                           |
| -------------------- | --------------------------------- |
| micro:bit board *1   | ![microbitV2](img/microbitV2.png) |
| micro USB cable *1   | ![usb](img/usb.png)               |
| 6812 RGB module *1   | ![KS6009](img/KS6009.png)         |
| 3 pin DuPont wire *1 | ![3pin](img/3pin.png)             |



##### Wiring Diagram

![z102](img/z102.png)

Wire up as above and connect the board to your computer via micro USB cable.



##### Test Code

**Complete code:**

![z103](img/z103.png)

![line1](img/line1.png)

When using 6812 RGB module, additional **Neopixel** extension is required.

**Add extension:**

1\. Click Extension.

![z104](img/z104.png)



2\. Enter the following link in the search box:

https://github.com/microsoft/pxt-neopixel

and press the “Enter”/![z105](img/z105.png) key on your keyboard.

![z106](img/z106.png)



3\. And click the extension neopixel.

![z107](img/z107.png)



4\. Successfully loaded:

![z108](img/z108.png)



**Brief description:**

Initialization: set the module to pin P14. There are four pixels on the module so we modify the led number to 4.

![z109](img/z109.png)



Set all pixels to light up in red for 1 sencond.

![z110](img/z110.png)



Similarly, set all pixels to yellow, blue, purple and white with each colour for 1 second.

![z111](img/z111.png)



##### Test Result

![4top](img/4top.png)

After uploading test code to micro:bit board according to <span style="color: rgb(245, 111, 64);">Step3 Download code</span>, keep the connection with the computer to power the main board. The 6812 RGB module lights up in red, yellow, blue, purple and white. Each colour remains 1 second and this sequence repeats.

![4bottom](img/4bottom.png)



#### Project 2: Ultrasonic Sensor

![KS0588](img/KS0588.png)

##### Introduction

![3top](img/3top.png)

![z201](img/z201.png)

Bats emit ultrasound through the mouth for echolocation or communication. These sound waves will bounce back so that bats orient and determine the obstacle position, size and whether nearby objects are moving. Because of high frequencies of this sound, people are not able to hear that. Scientists developed ultrasonic ranging by studying this method of detection in bats.

**Working principle:**

1. The transmitter will generate a high-frequency sound wave signal which will be converted to ultrasonic waves.

2. This ultrasonic signal will be sent from the transmitter and propagated outward.

3. When the ultrasonic wave encounters an obstacle, it will be reflected back.

4. The receiver will pick up these echo signals.

5. The receiver will also measure the time from transmission to reflection of the wave.

6. According to this time, the distance of the obstacle can be calculated.

![z202](img/z202.png)

![3bottom](img/3bottom.png)



##### Components

| Name                 | Picture                           |
| -------------------- | --------------------------------- |
| micro:bit board *1   | ![microbitV2](img/microbitV2.png) |
| micro USB cable *1   | ![usb](img/usb.png)               |
| Ultrasonic sensor *1 | ![KS0588](img/KS0588.png)         |
| 4pin DuPont wire *1  | ![4pin](img/4pin.png)             |



##### Wiring Diagram

![z203](img/z203.png)



##### Test Code

**Complete code:**

![z204](img/z204.png)

![line1](img/line1.png)

When using ultrasonic module, additional **Sonar** extension is required.

**Add extension:**

1\. Click Extension.

![z104](img/z104.png)



2\. Enter sonar in the search box and search, and you will see the sonar extension.

![z205](img/z205.png)



3\. Successfully loaded:

![z206](img/z206.png)



**Brief description:**

Serial input and output via USB connections.

![z207](img/z207.png)



Initialize ultrasonic module, set pin trig to P12 and pin echo to P8, set the unit to cm.

Store the detected distance value to the variable distance.

![z208](img/z208.png)



Refresh the results every 100ms.

![z209](img/z209.png)

##### Test Result

![4top](img/4top.png)

After uploading test code to micro:bit board according to <span style="color: rgb(245, 111, 64);">Step3 Download code</span>, keep the connection with the computer to power the main board. The distance values detected by the ultrasonic sensor will be shown on the serial monitor and they will be refreshed every 100ms.

![z210](img/z210.png)

![4bottom](img/4bottom.png)



#### Project 3: 130 Motor

![KS6038](img/KS6038.png)

##### Introduction

![3top](img/3top.png)

It is interesting that 130 motor does not require an additional driver board to enable itself. Please mount the fan on the motor first.

130 Motor is a common small DC motor, which is mainly used in small devices such as toys, models and remote controls. 130 refers to its shell diameter of about 13mm. It features small size, low power consumption, flexible speed, cheap price as well as low noise.

![3bottom](img/3bottom.png)



##### Components

| Name                | Picture                               |
| ------------------- | ------------------------------------- |
| micro:bit board *1  | ![microbitV2](img/microbitV2.png)     |
| micro USB cable *1  | ![usb](img/usb.png)                   |
| Fan *1              | ![fanblade](img/fanblade.png)         |
| 130 motor *1        | ![electromotor](img/electromotor.png) |
| 4pin DuPont wire *1 | ![4pin](img/4pin.png)                 |



##### Wiring Diagram

![z301](img/z301.png)



##### Test Code

**Complete code:**

![z302](img/z302.png)

![line1](img/line1.png)

**Brief description:**

The digital pins IN + and IN- of the 130 motor are two terminals for the power supply input. Their connection determines the rotation direction of the module.

Forward(IN+): When this signal is high level 1, the motor is turning forward.

Reversal(IN-): When this signal is high level 1, the motor reverses.

When both terminals are at low, the motor stops.

**By changing direction of the positive and negative pole, the 130 motor can switch its rotation direction. This is the most basic method.**



Connect pin IN- to P16, and pin IN+ to P13.

Forward rotating for 2 seconds:

![z303](img/z303.png)



Stop for 2 seconds:

![z304](img/z304.png)



Reversal rotating for 2 seconds:

![z305](img/z305.png)



##### Test Result

![4top](img/4top.png)

**<span style="background:#ff0;color:#000">ATTENTION:</span>**

**<span style="background:#ff0;color:#000">① Before uploading code, please do not put the motor flat on the table, resulting that the motor fails to rotate. It is recommended to pinch the terminal to put the fan up, as follows:</span>**

![z306](img/z306.png)

**<span style="background:#ff0;color:#000">② Before uploading code, please keep a distance from the motor, as its rotation speed is so fast that it may injury you.</span>**

**<span style="background:#ff0;color:#000">③ Before uploading code, please mount the battery holder first. Otherwise, the experiment may fail.</span>**



After uploading test code to micro:bit board according to <span style="color: rgb(245, 111, 64);">Step3 Download code</span>, keep the connection with the computer to power the main board. The 130 motor rotates clockwise and stops, and then rotates counter-clockwise and stops, with two seconds each. These actions repeats. 

![4bottom](img/4bottom.png)



#### Project 4: PIR Motion Sensor

![KS6018](img/KS6018.png)

##### Introduction

![3top](img/3top.png)

The human body temperature is generally constant at about 37°, and will emit infrared signals with a wavelength of about 10μm. Passive infrared probes just work by detecting the specific infrared waves emitted by human body.

These 10μm infrared waves are enhanced by the Fresnel filter and concentrated on the infrared sensing source to control the interference of the environment. The infrared sensing sources are usually pyroelectric elements, which can generate an alarm signal when the infrared radiation temperature of the human body changes. Otherwise, no signal will be output.

![3bottom](img/3bottom.png)



##### Components

| Name                 | Picture                           |
| -------------------- | --------------------------------- |
| micro:bit board *1   | ![microbitV2](img/microbitV2.png) |
| micro USB cable *1   | ![usb](img/usb.png)               |
| PIR motion sensor *1 | ![KS6018](img/KS6018.png)         |
| 3 pin DuPont wire *1 | ![3pin](img/3pin.png)             |



##### Wiring Diagram

![z401](img/z401.png)



##### Test Code

**Complete code:**

![z402](img/z402.png)

![line1](img/line1.png)

**Brief description:**

If the PIR motion sensor detects a human motion nearby, it will output a high level 1; when there is no motion, it outputs low 0.

Pin P15 reads the digital power level output by the PIR motion sensor.

![z403](img/z403.png)

Print the read values on the serial monitor.

![z404](img/z404.png)





##### Test Result

![4top](img/4top.png)

After uploading test code to micro:bit board according to <span style="color: rgb(245, 111, 64);">Step3 Download code</span>, keep the connection with the computer to power the main board. Click “Show console Device”.

![z405](img/z405.png)

When the PIR motion sensor detects no any motion, the red LED will light up and the serial monitor prints power level 0. If there is a human motion detected by the sensor, the red LED will turn off and 1 will be printed on the serial monitor, as follows:

![z406](img/z406.png)

If you're running Windows 7 or 8 instead of Windows 10, Google Chrome won't be able to match devices. CoolTerm will be required. 

Open CoolTerm and click Options to select SerialPort, and set COM port and baud rate to 115200, click OK and Connect. 

![z407](img/z407.png)

The serial monitor of CoolTerm shows digital values of power levels.

![z408](img/z408.png)

![4bottom](img/4bottom.png)



#### Project 5: DHT11 Temperature and Humidity Sensor

![KS6033](img/KS6033.png)

##### Introduction

![3top](img/3top.png)

DHT11 Temperature and Humidity Sensor detects ambient temperature and humidity with the following features:

1. Small size, suitable for a variety of small electronic projects.
2. Wide measuring range, temperature range is 0-50°C, humidity range is 20-90%RH.
3. Easy to use, connect only 3 pins to the single chip microcomputer or computer when using.
4. Cheap price, a good choice for beginners in their electronic production.

![3bottom](img/3bottom.png)



##### Components

| Name                                     | Picture                           |
| ---------------------------------------- | --------------------------------- |
| micro:bit board *1                       | ![microbitV2](img/microbitV2.png) |
| micro USB cable *1                       | ![usb](img/usb.png)               |
| DHT11 Temperature and Humidity Sensor *1 | ![KS6033](img/KS6033.png)         |
| 3pin DuPont wire *1                      | ![3pin](img/3pin.png)             |



##### Wiring Diagram

![z501](img/z501.png)



##### Test Code

**Complete code:**

![z502](img/z502.png)

![line1](img/line1.png)

When using the temperature and humidity sensor, additional **temperature and humidity sensor** extension is required.

**Add extension:**

1\. Click Extension.

![z104](img/z104.png)



2\. Enter DHT11 in the search box and search, and click DHT11_DHT22 to import the extension.

![z503](img/z503.png)



3\. Successfully loaded:

![z504](img/z504.png)



**Brief description:**

Serial input and output via USB connections.

![z505](img/z505.png)



Set the temperature and humidity sensor pin to P2.

![z506](img/z506.png)



Read the temperature and humidity values and display them on the serial monitor.

![z507](img/z507.png)



Refresh the results every 500ms.

![z508](img/z508.png)



##### Test Result

![4top](img/4top.png)

After uploading test code to micro:bit board according to <span style="color: rgb(245, 111, 64);">Step3 Download code</span>, keep the connection with the computer to power the main board. The sensor detects the ambient temperature and humidity values and reveals them on the serial monitor. The results will be refreshed every 500ms.

![z509](img/z509.png)

![4bottom](img/4bottom.png)



#### Project 6: Servo

![67820089](img/67820089.png)

##### Introduction

![3top](img/3top.png)

Servo, in essence, is a kind of position diver. There are lots of specifications of servos. Yet almost boasts three wires. They may be in different colours due to brands. Herein, this servo wires are covered with brown(ground), red(positive) and orange(signal). 

![z601](img/z601.png)

![3bottom](img/3bottom.png)



##### Components

| Name               | Picture                           |
| ------------------ | --------------------------------- |
| micro:bit board *1 | ![microbitV2](img/microbitV2.png) |
| micro USB cable *1 | ![usb](img/usb.png)               |
| Servo *1           | ![67820089](img/67820089.png)     |



##### Wiring Diagram

![z602](img/z602.png)



##### Test Code

**Complete code:**

![z603](img/z603.png)

![line1](img/line1.png)

**Code block:**

![z604](img/z604.png)

This block is used to set the rotation angle of the servo, which ranges form 0°~180°.



**Brief description:**

Set the servo pin to P1 and angle to 0°.

![z605](img/z605.png)



Servo stops rotating for 1 second after reaching the angle of 0°.

![z606](img/z606.png)



##### Test Result

![4top](img/4top.png)

After uploading test code to micro:bit board according to <span style="color: rgb(245, 111, 64);">Step3 Download code</span>, keep the connection with the computer to power the main board. The servo will repeat these actions: it rotates to 45°, 90°, 135°, 180°, each position with a pause of 1 second.

![4bottom](img/4bottom.png)



#### Project 7: 1602 LCD Display



##### Introduction

![3top](img/3top.png)

LCD display is a common display device that shows text, images, and video. It is commonly used in electronic products such as TVS, computers and mobile phones. It adopts liquid crystal materials (they change the way light passes in response to changes in voltage) to control the passage of light, so as to present different images and colours. 

LCD displays are divided into colourful ones and black-white ones. The former ones are able to display rich colours, while the latter only shows black and white.

The communication mode of this module is I2C. But what is I2C?

I2C is a path that transmits information among electronic devices. For example, you have a toy that want to chat with another one, but they cannot communicate directly. At this point, I2C plays a role of passer allowing them chat with each other.

Imagine there are two persons named Master and Slave. Master orders Slave to do something. He said, “Show me the toy in your hand!” And Slave would give him his toy. Not just that, I2C is able to take more than one Slave. It is the main road with a(many) branch(es). 

Wish you have fun with I2C!

![z701](img/z701.png)

The “main road” of I2C is divided into two parts, which is called “pins”. One is clock line (SCL), while the other is data line (SDA).

Like clock, SCL will tick-tock to inform all toys the time. When it emits sound, one toy know it is his time to talk.

SDA, however, passes messages for them. If Master Toy asks “Did you have fun today?” The answer of Slave Toy will be sent back via data line.

With these two lines, their toys can play and chat together. 

In this project, we connect the 1602 LCD display **SDA interface to pin P20 and SCL to pin P19**.

![3bottom](img/3bottom.png)



##### Components

| Name                 | Picture                           |
| -------------------- | --------------------------------- |
| micro:bit board *1   | ![microbitV2](img/microbitV2.png) |
| micro USB cable *1   | ![usb](img/usb.png)               |
| 1602 LCD *1          | ![KS0061](img/KS0061.png)         |
| 4 pin DuPont wire *1 | ![4pin](img/4pin.png)             |



##### Wiring Diagram

![z702](img/z702.png)



##### Test Code

**Complete code:**

![z703](img/z703.png)

![line1](img/line1.png)

When using LCD display, additional **LCD** extension is required.

**Add extension:**

1\. Click Extension.

![z104](img/z104.png)



2\. Enter the following link in the search box:

https://github.com/keyestudio2019/ks_IoT

and then click search and you will see the IoT_keyestudio. Click to import it.

![z704](img/z704.png)



3\. Successfully loaded:

![z705](img/z705.png)



**Brief description:**

Set the address of the LCD. Set LCD display coordinate of (5,0) to show string “Hello！”, and turn on the backlight.

![z706](img/z706.png)



Create a variable number.

![z707](img/z707.png)



Change the value of the variable number with a magnitude of 1.

![z708](img/z708.png)



Displays the value of the variable number at the LCD (6,1).

![z709](img/z709.png)



Refresh the results every 500ms.

![z710](img/z710.png)



##### Test Result

![4top](img/4top.png)

After uploading test code to micro:bit board according to <span style="color: rgb(245, 111, 64);">Step3 Download code</span>, keep the connection with the computer to power the main board. The LCD display shows “Hello！“ on the first line and it counts down on the second line. It refreshes every 500ms.

![z711](img/z711.gif)

<span style="color: rgb(65, 104, 211);">**ATTENTION:**</span>

<span style="color: rgb(65, 104, 211);">If the display does not react after uploading the code and powering on, rotate the potentiometer on the back of the 1602 LCD display clockwise to adjust the brightness of the backlight.</span>

![z712](img/z712.png)

![4bottom](img/4bottom.png)



### Smart Home Assembly

Congratulations! You have learned and mastered the functions of the modules required for smart homes, and you can use them flexibly! This not only shows your learning ability, but also reflects your enthusiasm and pursuit of intelligent life.

I believe that after this learning and accumulation, you will be able to design more innovative and practical smart home solutions. Let‘s explore the infinite possibilities of smart home with an open mind, and jointly open a new chapter of smarter and more comfortable life!

![z001](img/z001.png)

Next, let's start the smart home installation together! Through this process, you can not only build the infrastructure of the smart home by hand, but also gain a deep understanding of the function of each module and the principle of collaboration. After the installation is ready, we can officially open the smart home projects.

#### 1. Install the expansion board, ultrasonic sensor, and temperature and humidity sensor

![99_00](img/99_00.png)



![99_01](img/99_01.png)



![99_02](img/99_02.png)



![99_03](img/99_03.png)



![99_04](img/99_04.png)



Connect the 3pin wire to the modules.

| wire colours      | module pins       |
| ----------------- | ----------------- |
| ![py](img/py.png) | ![ds](img/ds.png) |
| ![pr](img/pr.png) | ![dv](img/dv.png) |
| ![pb](img/pb.png) | ![dg](img/dg.png) |

![99_05](img/99_05.png)

Connect the 4pin wire to the pin end of the ultrasonic sensor.



![99_06](img/99_06.png)



![99_07](img/99_07.png)



![99_08](img/99_08.png)



#### 2. Install the display and PIR motion sensor



![99_09](img/99_09.png)



![99_10](img/99_10.png)



![99_11](img/99_11.png)



Connect the 4pin wire to the pin end of the LCD

![99_12](img/99_12.png)



![99_13](img/99_13.png)



![99_14](img/99_14.png)

Connect the wire to the module and pass the wire through the hole.



![99_15](img/99_15.png)



#### 3. Mount the door servo and battery holder board



![99_16](img/99_16.png)



Note the position of the servo wire.

![99_17](img/99_17.png)



![99_18](img/99_18.png)



![99_19](img/99_19.png)



![99_20](img/99_20.png)

<span style="background:#ff0;color:#000">Attention please! Servo must be calibrated! Or else it may be stuck or burned!</span>

<span style="background:#ff0;color:#000">Attention please! Servo must be calibrated! Or else it may be stuck or burned!</span>

<span style="background:#ff0;color:#000">Attention please! Servo must be calibrated! Or else it may be stuck or burned!</span>



Connect the servo to pin P1 on the expansion board, insert the micro:bit board and connect it to your computer via micro USB cable.

Download the code.![99_85](img/99_85.png)

![99_86](img/99_86.png)



For Windows 10 App, click “download”. For browsers, send the hex file to the micro:bit board.

After uploading the code, servo rotates to 0° to fulfil the calibration. Disconnect the micro:bit board to the computer and the servo to the expansion board, and mount the servo according to the following steps.

<span style="background:#ff0;color:#000">Note that when installing, please keep the door horizontal to the servo. Mount the door gently on the servo and do not rotate the servo. If they cannot align with each other, move until they can.</span>

![ss](img/ss.png)

<span style="background:#ff0;color:#000">Install the door and servo and tighten the screws. But please do not screw too tight.</span>



![99_21](img/99_21.png)



![99_22](img/99_22.png)

<span style="background:#ff0;color:#000">Be careful not to rotate the servo.</span>

![99_23](img/99_23.png)



![99_24](img/99_24.png)



![99_25](img/99_25.png)



![99_26](img/99_26.png)



![99_27](img/99_27.png)



![99_28](img/99_28.png)



![99_29](img/99_29.png)



![99_30](img/99_30.png)

#### 4. Assemble the house



![99_31](img/99_31.png)



![99_32](img/99_32.png)



![99_33](img/99_33.png)



![99_34](img/99_34.png)



![99_35](img/99_35.png)



![99_36](img/99_36.png)



![99_37](img/99_37.png)



![99_38](img/99_38.png)



![99_39](img/99_39.png)



![99_40](img/99_40.png)





#### 5. Mount the trash can



![99_45](img/99_45.png)



![99_46](img/99_46.png)



![99_47](img/99_47.png)



![99_48](img/99_48.png)



![99_49](img/99_49.png)



![99_50](img/99_50.png)



![99_51](img/99_51.png)



![99_52](img/99_52.png)



![99_53](img/99_53.png)



![99_54](img/99_54.png)



![99_55](img/99_55.png)



![99_56](img/99_56.png)



![99_57](img/99_57.png)

<span style="background:#ff0;color:#000">Attention please! Servo must be calibrated! Or else it may be stuck or burned!</span>

<span style="background:#ff0;color:#000">Attention please! Servo must be calibrated! Or else it may be stuck or burned!</span>

<span style="background:#ff0;color:#000">Attention please! Servo must be calibrated! Or else it may be stuck or burned!</span>



Connect the servo to pin P9 on the expansion board, insert the micro:bit board and connect it to your computer via micro USB cable.

Download the code.![99_85](img/99_88.png)

![99_87](img/99_87.png)



For Windows 10 App, click “download”. For browsers, send the hex file to the micro:bit board.

After uploading the code, servo rotates to 0° to fulfil the calibration. Disconnect the micro:bit board to the computer and the servo to the expansion board, and mount the servo according to the following steps.

<span style="background:#ff0;color:#000">Note that when installing, please keep the door horizontal to the servo.</span>

Mount the door gently on the servo and do not rotate the servo.

![ss](img/ss.png)

<span style="background:#ff0;color:#000">If they cannot align with each other, adjust the cross arm. Turn the cross arm 90° at a time, and then gently install the door on the servo until the door is level with the servo.</span>

Install the door and servo and tighten the screws. But please do not screw too tight.

![99_58](img/99_58.png)



![99_59](img/99_59.png)

Wire up according to the figure below.

![99_60](img/99_60.png)

#### 6. Mount the fan



![99_61](img/99_61.png)



![99_62](img/99_62.png)



![99_63](img/99_63.png)



![99_64](img/99_64.png)

#### 7.Install the LED module



![99_41](img/99_41.png)



![99_42](img/99_42.png)

![99_43](img/99_43.png)



![99_44](img/99_44.png)

#### 8. Wire up

![99_66](img/99_66.png)

![99_65](img/99_65.png)

![99_67](img/99_67.png)



![99_68](img/99_68.png)



![99_69](img/99_69.png)



![99_70](img/99_70.png)



![99_71](img/99_71.png)



![99_72](img/99_72.png)

#### 9. Mount the roof

![99_73](img/99_73.png)



![99_74](img/99_74.png)



![99_75](img/99_75.png)



![99_76](img/99_76.png)



![99_77](img/99_77.png)



![99_78](img/99_78.png)



![99_79](img/99_79.png)



#### 10.  Mount the battery holder

Six AA batteries are required.

![99_80](img/99_80.png)

When putting the batteries, please pay attention to the + and - .

![99_89](img/99_89.png)

![99_90](img/99_90.png)

After that, insert the battery holder into the house. Note the position of the wire: it is at the right side.

![99_81](img/99_81.png)



![99_82](img/99_82.png)



![99_83](img/99_83.png)



![99_84](img/99_84.png)



### Smart Home Projects

Everything is ready, let's go to the journey of smart home, and experience the perfect integration of technology and life!



#### Project 1: Sound Control Light

##### Introduction

![3top](img/3top.png)

Herein, we adopt the wisdom of sound to control things. Every time you clap, the 6812 RGB module in the room will bloom into different colours, which is colourful and charming.![3bottom](img/3bottom.png)



##### Components

| Name                 | Picture                           |
| -------------------- | --------------------------------- |
| micro:bit board *1   | ![microbitV2](img/microbitV2.png) |
| micro USB cable *1   | ![usb](img/usb.png)               |
| 6812 RGB module *1   | ![KS6009](img/KS6009.png)         |
| 3 pin DuPont wire *1 | ![3pin](img/3pin.png)             |



##### Test Code

**Complete code:**

![0101](img/0101.png)

![line1](img/line1.png)

**Brief description:**

Click extension and search the link in the box: https://github.com/keyestudio2019/ks_IoT

Click IoT_keyestudio to import it.

![z704](img/z704.png)



Initialize 6812 RGB module and create three variables R, G and B.

![0102](img/0102.png)



Set variables R, G, B to random values among 10~255.

![0103](img/0103.png)



Show the sound volume values on the serial monitor and refresh them every 100ms.

![0104](img/0104.png)



If the sound value is greater than 140 (140 is a threshold which can be modified according to needs), the RGB module shows random colors.

![0105](img/0105.png)



Or else, the RGB module goes off.

![0106](img/0106.png)



##### Test Result

![4top](img/4top.png)

After uploading test code to micro:bit board according to <span style="color: rgb(245, 111, 64);">Step3 Download code</span>, keep the connection with the computer to power the main board. The micro:bit board detects the sound volume and prints the values on the serial monitor every 100ms. Clap your hands and the sound value may exceed 140. At this time, the RGB module shows random colours.

![4bottom](img/4bottom.png)



#### Project 2: Password Door



##### Introduction

![3top](img/3top.png)

The Smart Password Door is controlled by button A and B of the micro:bit to enter passwords, which will be displayed on the LCD. If they are correct, the door will open, the RGB module will light up, and the LCD will display "Welcome".

![3bottom](img/3bottom.png)



##### Components

| Name                 | Picture                           |
| -------------------- | --------------------------------- |
| micro:bit board *1   | ![microbitV2](img/microbitV2.png) |
| micro USB cable *1   | ![usb](img/usb.png)               |
| Servo *1             | ![67820089](img/67820089.png)     |
| 1602 LCD *1          | ![KS0061](img/KS0061.png)         |
| 4 pin DuPont wire *1 | ![4pin](img/4pin.png)             |



##### Test Code

**Complete code:**

![0201](img/0201.png)

![line1](img/line1.png)

**Brief description:**

Click extension and search the link in the box: https://github.com/keyestudio2019/ks_IoT

Click IoT_keyestudio to import it.

![z704](img/z704.png)



Initialize the servo, LCD display, LED matrix, and set the door passwords to AABB.

![0202](img/0202.png)



Press micro:bit button A, and the “A” shows on the middle of the second line on the LCD.

![0203](img/0203.png)



Press micro:bit button B, and the “B” shows on the middle of the second line on the LCD.

![0204](img/0204.png)



Press button A and B to verify the passwords. If they are correct, LED matrix shows icon ![0207](img/0207.png), and LCD says “Welcome!“. Meanwhile, the servo rotates to open the door.

![0205](img/0205.png)



If you enter wrong passwords, LCD prompts “Error!“ and shows “Enter again” on its second line. A second later, clear the display and say “Enter password:”. Now re-enter the passwords.

![0206](img/0206.png)



Touch the micro:bit logo, the LCD will clear its display and show “Close the door”. Then, the servo rotates to close the door. After that, LCD will be back to prompt “Enter password:”.

![0208](img/0208.png)



##### Test Result

![4top](img/4top.png)

After uploading test code to micro:bit board according to <span style="color: rgb(245, 111, 64);">Step3 Download code</span>, keep the connection with the computer to power the main board. We press buttons A and B to enter passwords which shows on the LCD. After entering, press the two buttons at the same time to verify the passwords. The door will open if the passwords are correct. Touch the logo to close the door.

![4bottom](img/4bottom.png)



#### Project 3: Smart Anti-theft Alarm



##### Introduction

![3top](img/3top.png)

When the PIR motion sensor detects a human motion, the LCD shows “Someone！“ and the micro:bit speaker alarms, and the RGB in the room flashes in red.

![3bottom](img/3bottom.png)



##### Components

| Name                 | Picture                           |
| -------------------- | --------------------------------- |
| micro:bit board *1   | ![microbitV2](img/microbitV2.png) |
| micro USB cable *1   | ![usb](img/usb.png)               |
| PIR motion sensor *1 | ![KS6018](img/KS6018.png)         |
| 1602 LCD *1          | ![KS0061](img/KS0061.png)         |
| 3pin DuPont wire *1  | ![3pin](img/3pin.png)             |
| 4 pin DuPont wire *1 | ![4pin](img/4pin.png)             |



##### Test Code

**Complete code:**

![0301](img/0301.png)

![line1](img/line1.png)

**Brief description:**

Click extension and search the link in the box: https://github.com/keyestudio2019/ks_IoT

Click IoT_keyestudio to import it.

![z704](img/z704.png)



Initialize the LCD display and the RGB module.

![0302](img/0302.png)



Clear the LCD first.

![0303](img/0303.png)



Determine whether the P15 outputs 1. If yes, the speaker emits sounds and the LCD prompts “Someone！”, and RGB flashes in red.

![0304](img/0304.png)



If no human motion is detected, the speaker remains quiet and LCD shows “All goes well.” with RGB off.

![0305](img/0305.png)



##### Test Result

![4top](img/4top.png)

After uploading test code to micro:bit board according to <span style="color: rgb(245, 111, 64);">Step3 Download code</span>, keep the connection with the computer to power the main board. If the sensor detects a human motion, the speaker alarms and the LCD prompts “Someone！”, and RGB flashes in red. If no human motion is detected, the speaker remains quiet and LCD shows “All goes well.” with RGB off.

![4bottom](img/4bottom.png)



#### Project 4: Environment Monitoring



##### Introduction

![3top](img/3top.png)

This smart environment monitoring system displays the temperature and humidity values detected by the DHT11 sensor and the brightness values detected by the light sensor on the micro:bit mainboard on the LCD. When the brightness value is lower than the set value, the LED matrix will display a smile icon; If it exceeds the set value, the LED matrix will display a crying face icon.

![3bottom](img/3bottom.png)



##### Components

| Name                                     | Picture                           |
| ---------------------------------------- | --------------------------------- |
| micro:bit board *1                       | ![microbitV2](img/microbitV2.png) |
| micro USB cable *1                       | ![usb](img/usb.png)               |
| 1602 LCD *1                              | ![KS0061](img/KS0061.png)         |
| DHT11 Temperature and Humidity Sensor *1 | ![KS6033](img/KS6033.png)         |
| 3pin DuPont wire *1                      | ![3pin](img/3pin.png)             |
| 4 pin DuPont wire *1                     | ![4pin](img/4pin.png)             |



##### Test Code

**Complete code:**

![0401](img/0401.png)

![line1](img/line1.png)

**Brief description:**

Click extension and search the link in the box: https://github.com/keyestudio2019/ks_IoT

Click IoT_keyestudio to import it.

![z704](img/z704.png)



Initialize the LCD display.

![0402](img/0402.png)



Connect the temperature and humidity sensor to the pin P0.

![0403](img/0403.png)



Clear the display and show the temperature, humidity and ambient light values on the LCD, and refresh these values per second.

![0404](img/0404.png)



When the brightness value is lower than the set value, the LED matrix will display a smile icon; If it exceeds the set value, the LED matrix will display a crying face icon.

![0405](img/0405.png)



##### Test Result

![4top](img/4top.png)

After uploading test code to micro:bit board according to <span style="color: rgb(245, 111, 64);">Step3 Download code</span>, keep the connection with the computer to power the main board. The LCD updates the temperature, humidity and light values every second. When the brightness value is lower than the set value, the LED matrix will display a smile icon; If it exceeds the set value, the LED matrix will display a crying face icon.

![4bottom](img/4bottom.png)



#### Project 5: Temperature Sensing Fan



##### Introduction

![3top](img/3top.png)

When the indoor temperature exceeds the set value, the fan will automatically work to cool down the temperature within a comfortable range. The LCD displays the ambient temperature and fan operating status in real time, providing users with intuitive temperature control feedback.

![3bottom](img/3bottom.png)



##### Components

| Name                 | Picture                               |
| -------------------- | ------------------------------------- |
| micro:bit board *1   | ![microbitV2](img/microbitV2.png)     |
| micro USB cable *1   | ![usb](img/usb.png)                   |
| Fan *1               | ![fanblade](img/fanblade.png)         |
| 130 motor *1         | ![electromotor](img/electromotor.png) |
| 1602 LCD *1          | ![KS0061](img/KS0061.png)             |
| 3pin DuPont wire *1  | ![3pin](img/3pin.png)                 |
| 4 pin DuPont wire *2 | ![4pin](img/4pin.png)                 |



##### Test Code

**Complete code:**

![0501](img/0501.png)

![line1](img/line1.png)

**Brief description:**

Click extension and search the link in the box: https://github.com/keyestudio2019/ks_IoT

Click IoT_keyestudio to import it.

![z704](img/z704.png)



Initialize the LCD display.

![0402](img/0402.png)



Clear the LCD and show temperature values on the LCD.

![0502](img/0502.png)



When the detected temperature reaches 28° (28 can be modified according to your actual needs), the fan turns on and the LCD shows “Fan on”.

![0503](img/0503.png)



Otherwise, the fan stops and the LCD shows “Fan off”.

![0504](img/0504.png)



##### Test Result

![4top](img/4top.png)

After uploading test code to micro:bit board according to <span style="color: rgb(245, 111, 64);">Step3 Download code</span>, keep the connection with the computer to power the main board. When the indoor temperature exceeds 28°, the fan will automatically work. Or else, the fan stops working. The LCD displays fan operating status in real time.

![4bottom](img/4bottom.png)



#### Project 6: Earthquake Warning



##### Introduction

![3top](img/3top.png)

When the acceleration sensor of the micro:bit board detects that the house is tilting, the on-board speaker will emit sounds, the LCD will display the value detected by the sensor, and the red LED will turn on.

![3bottom](img/3bottom.png)



##### Components

| Name                 | Picture                           |
| -------------------- | --------------------------------- |
| micro:bit board *1   | ![microbitV2](img/microbitV2.png) |
| micro USB cable *1   | ![usb](img/usb.png)               |
| 6812 RGB module *1   | ![KS6009](img/KS6009.png)         |
| 1602 LCD *1          | ![KS0061](img/KS0061.png)         |
| 3pin DuPont wire *1  | ![3pin](img/3pin.png)             |
| 4 pin DuPont wire *1 | ![4pin](img/4pin.png)             |



##### Test Code

**Complete code:**

![0601](img/0601.png)

![line1](img/line1.png)

**Brief description:**

Click extension and search the link in the box: https://github.com/keyestudio2019/ks_IoT

Click IoT_keyestudio to import it.

![z704](img/z704.png)



Initialize the LCD display and RGB.

![0602](img/0602.png)



Read the decomposition value of the accelerometer on the Y-axis. If the value is outside the range of 1060~1088, it indicates that the house tilts, so the earthquake is triggered: print the value on the LCD, the speaker alarms, and the RGB lights up in red.

![0603](img/0603.png)



If the decomposition value in the Y-axis is within the range of 1060~1088, it indicates that the house is stable so the earthquake alarm is cancelled.

![0604](img/0604.png)



Refresh the results every 200ms.

![0605](img/0605.png)



##### Test Result

![4top](img/4top.png)

After uploading test code to micro:bit board according to <span style="color: rgb(245, 111, 64);">Step3 Download code</span>, keep the connection with the computer to power the main board. If the sensor detects that the house tilts, print the Y-axis value on the LCD, the speaker alarms, and the RGB lights up in red.

![4bottom](img/4bottom.png)



#### Project 7: Distance Detection



##### Introduction

![3top](img/3top.png)

Based on an ultrasonic module, this distance detection system detects the distance of obstacles ahead and shows the measurement results in real time on an LCD display.

![3bottom](img/3bottom.png)



##### Components

| Name                 | Picture                           |
| -------------------- | --------------------------------- |
| micro:bit board *1   | ![microbitV2](img/microbitV2.png) |
| micro USB cable *1   | ![usb](img/usb.png)               |
| Ultrasonic sensor *1 | ![KS0588](img/KS0588.png)         |
| 1602 LCD *1          | ![KS0061](img/KS0061.png)         |
| 3pin DuPont wire *1  | ![3pin](img/3pin.png)             |
| 4 pin DuPont wire *1 | ![4pin](img/4pin.png)             |

Before uploading code, please install the ultrasonic sensor on the wall of the home and then wire up as follows:

![0807](img/0807.png)



##### Test Code

**Complete code:**

![0701](img/0701.png)

![line1](img/line1.png)

**Brief description:**

Click extension and search the link in the box: https://github.com/keyestudio2019/ks_IoT

Click IoT_keyestudio to import it.

![z704](img/z704.png)

Enter sonar in the search box and search, and you will see the sonar extension.

![z205](img/z205.png)



Initialize the LCD display.

![0702](img/0702.png)



Initialize the ultrasonic sensor.

![0703](img/0703.png)



Clear the LCD and show the distance value of obstacles on the LCD. Refresh the results every 100ms.

![0704](img/0704.png)



##### Test Result

![4top](img/4top.png)

After uploading test code to micro:bit board according to <span style="color: rgb(245, 111, 64);">Step3 Download code</span>, keep the connection with the computer to power the main board. The ultrasonic module detects the distance of obstacles ahead and shows the result on the LCD display. The detected results are refreshed every 100ms.

![4bottom](img/4bottom.png)



#### Project 8: Smart Trash Can



##### Introduction

![3top](img/3top.png)

When the user's hand is near the sensing area of the trash can, the smart trash can will automatically open the lid. Then the lid closes automatically when the hand leaves the sensing range.

![3bottom](img/3bottom.png)



##### Components

| Name                 | Picture                           |
| -------------------- | --------------------------------- |
| micro:bit board *1   | ![microbitV2](img/microbitV2.png) |
| micro USB cable *1   | ![usb](img/usb.png)               |
| Ultrasonic sensor *1 | ![KS0588](img/KS0588.png)         |
| Servo *1             | ![67820089](img/67820089.png)     |
| 3pin DuPont wire *1  | ![3pin](img/3pin.png)             |
| 4 pin DuPont wire *1 | ![4pin](img/4pin.png)             |

Before uploading code, please install the ultrasonic sensor on the trash can and then wire up as follows:

![0807](img/0807.png)



##### Test Code

**Complete code:**

![0801](img/0801.png)

![line1](img/line1.png)

**Brief description:**

Click extension, enter sonar in the search box and search, and you will see the sonar extension.

![z205](img/z205.png)



Initialize the servo to ensure that the initial state of the lid is in a close state.

![0802](img/0802.png)



Connect the servo to the pin and detect the obstacle distance value. Assign the value to the variable distance.

![0803](img/0803.png)



If the distance value measured by the ultrasonic module is within the range of 2~10cm, the servo rotates to open the lid for 2 seconds to ensure that there is enough time to throw the garbage (the lasting time can be changed according to your needs).

![0804](img/0804.png)



Otherwise, the lid is closed.

![0805](img/0805.png)



The ultrasonic module reads the values every 100ms.

![0806](img/0806.png)



##### Test Result

![4top](img/4top.png)

After uploading test code to micro:bit board according to <span style="color: rgb(245, 111, 64);">Step3 Download code</span>, keep the connection with the computer to power the main board. Put you hand in front of the ultrasonic module within the range of 2~10cm, and the servo will rotate to open the lid for 2 seconds. Remove you hand and the servo rotates to close the lid.

![4bottom](img/4bottom.png)



#### Project 9: Bluetooth APP Control LED



##### Introduction

![3top](img/3top.png)

We sent control command on mobile phone/tablet through Bluetooth to control the ON/OFF state on the LED. You can use a Bluetooth control APP or develop your own APP to send control commands.

![3bottom](img/3bottom.png)



##### Components

| Name                | Picture                           |
| ------------------- | --------------------------------- |
| micro:bit board *1  | ![microbitV2](img/microbitV2.png) |
| micro USB cable *1  | ![usb](img/usb.png)               |
| 6812 RGB module *1  | ![KS6009](img/KS6009.png)         |
| 3pin DuPont wire *1 | ![3pin](img/3pin.png)             |

In addition, you also need to install the Bluetooth APP we provide.

Android: Directly use the provided installation package APK (in the Android APK folder).

![0901](img/0901.png)

ios: Search for IoT microbit in the App Store. Click to download.

![0902](img/0902.png)



##### Test Code

**Complete code:**

![0903](img/0903.png)

![line1](img/line1.png)

**Brief description:**

Click extension and search the link in the box: https://github.com/keyestudio2019/ks_IoT

Click IoT_keyestudio to import it.

![z704](img/z704.png)

Enter bluetooth in the search box and search, and you will see the bluetooth extension.

![0904](img/0904.png)

![0905](img/0905.png)



Initialize RGB and LED. Serial input and output via USB connections.

![0906](img/0906.png)



Disconnect the Bluetooth.

![0907](img/0907.png)



When the Bluetooth is connected, the icon will be displayed on the LED matrix.

![0908](img/0908.png)



Read the Bluetooth.

![0909](img/0909.png)



If “a” is read, it means that you press the LED command button, so the LED lights up.

![0910](img/0910.png)



If “b” is read, it means that you press the LED command button again, so the LED goes off.

![0911](img/0911.png)

**Note: After writing the code, you need to modify the Project Settings to no pairing required and then save, as shown below:**

![0912](img/0912.png)

![0913](img/0913.png)

Click the searched Bluetooth name of the micro:bit board.



##### Test Result

![4top](img/4top.png)

After uploading test code to micro:bit board according to <span style="color: rgb(245, 111, 64);">Step3 Download code</span>, keep the connection with the computer to power the main board. Open the Bluetooth APP and click CONNECT.

![0914](img/0914.png)

Click the searched Bluetooth name of the micro:bit board.

![0915](img/0915.png)

The Bluetooth is connected.

![0916](img/0916.png)

Click the button shown in the picture below and the LED lights up. Click again to turn off the LED.

![0917](img/0917.png)

![4bottom](img/4bottom.png)



#### Project 10: Bluetooth Smart Home



##### Introduction

![3top](img/3top.png)

Let's learn how to use Bluetooth APP to control smart home in this project.

![3bottom](img/3bottom.png)



##### Components

| Name                 | Picture                           |
| -------------------- | --------------------------------- |
| micro:bit board *1   | ![microbitV2](img/microbitV2.png) |
| micro USB cable *1   | ![usb](img/usb.png)               |
| 6812 RGB module *1   | ![KS6009](img/KS6009.png)         |
| servo *2             | ![67820089](img/67820089.png)     |
| 1602 LCD *1          | ![KS0061](img/KS0061.png)         |
| PIR motion sensor *1 | ![KS6018](img/KS6018.png)         |
| Ultrasonic sensor *1 | ![KS0588](img/KS0588.png)         |
| 3pin DuPont wire *3  | ![3pin](img/3pin.png)             |
| 4 pin DuPont wire *2 | ![4pin](img/4pin.png)             |

In addition, you also need to install the Bluetooth APP we provide. Please refer to the previous project to install. 

The characters sent by the Bluetooth APP button are as follows:

![1001](img/1001.png)



##### Test Code

**Complete code:**



![line1](img/line1.png)

**Brief description:**

Click extension and search the link in the box: https://github.com/keyestudio2019/ks_IoT

Click IoT_keyestudio to import it.

![z704](img/z704.png)

Enter bluetooth in the search box and search, and you will see the bluetooth extension.

![0904](img/0904.png)

![0905](img/0905.png)



Enter sonar in the search box and search, and you will see the sonar extension.

![z205](img/z205.png)



Initialization.

![1002](img/1002.png)



Bluetooth connection is successful, and the LED matrix shows “√”.

![1003](img/1003.png)



Bluetooth is disconnected, and the LED dot matrix display “×” pattern.

![1004](img/1004.png)



Press ![1006](img/1006.png) once and the code blocks will execute. The RGB turns on.

![1007](img/1007.png)



Press ![1006](img/1006.png) again and the code blocks will execute. The RGB goes off.

![1008](img/1008.png)



Press ![1009](img/1009.png) once, and the ultrasonic module in the home activates the ranging function and displays the measured values on the LCD display.

Press it again to turn off this function. Clear the display.

![1010](img/1010.png)



Press ![1012](img/1012.png) to enable the smart trash can. Note that the ultrasonic sensor in the home should be removed in advance and then installed on the trash can. Put you hand in front of the sensor within the range of 2~10cm, and the servo rotates to open the lid for 2 seconds. Remove your hand and the lid closes.

Press it again to turn off this function. The lid closes.

![1011](img/1011.png)



Press ![1014](img/1014.png) to enable the temperature control fan to monitor the ambient temperature value in real time. When the temperature exceeds 28°C, the fan is on and the LCD shows “Fan on". Otherwise, the fan turns off and the LCD shows “Fan off”. 

Press it again to turn off this function. The fan stops.

![1013](img/1013.png)



Press ![1016](img/1016.png) to monitor the ambient environment. The temperature, humidity and light value will be displayed on the LCD. When the light value is lower than 20, the LED matrix shows a smile icon. Or else, the LED shows a crying face.

![1015](img/1015.png)



Press ![1018](img/1018.png) to activate the anti-theft alarm. If a movement is detected, the speaker alarms and the LCD shows “Someone！” with RGB flashing in red. If not, there is no sounds and LCD displays “All goes well.” with RGB off.

![1017](img/1017.png)



Press ![1020](img/1020.png) to activate the earthquake warning system. If the tilt of the house is detected, the earthquake alarm is triggered, the value on the Y axis is displayed on the LCD and an alarm sound is emitted with the RGB lighting in red.

![1019](img/1019.png)



Press the following icons to show corresponding icons on the LED matrix. Press again to clear the LED matrix.

![1021](img/1021.png)

![1022](img/1022.png)



![1023](img/1023.png)

Press ①. Each time you tap, the value of neo_count is increased by one. The maximum value is 9 so it does not increase after reaching 9.

![1024](img/1024.png)



Press ②. Each time you tap, the value of neo_count is decreased by one. The minimum value is 1 so it does not decrease after reducing to 1.

![1025](img/1025.png)



Press ③ to zero out the value of neo_count.

![1026](img/1026.png)



Depending on the neo_count value, the RGB module displays different colours.

![1027](img/1027.png)



Press the micro:bit buttons on the mainboard to enter the passwords. Press A displays A and press B displays B on the LCD.

![1028](img/1028.png)



Press A+B to confirm the passwords. If the password is correct, LCD shows “Welcome!” and “Open the door”, and the servo rotates to open the door.

If the password is wrong, LCD shows “Error” and “Enter again” for 1 seconds. And then it displays “Enter password:”.

![1029](img/1029.png)



Touch the logo and LCD shows “Close the door”, and the servo rotates to close the door. A second later, LCD shows “Enter password:“.

![1030](img/1030.png)



##### Test Result

![4top](img/4top.png)

After uploading test code to micro:bit board according to <span style="color: rgb(245, 111, 64);">Step3 Download code</span>, keep the connection with the computer to power the main board. Open the Bluetooth APP and tap Connect to connect the Bluetooth. The functions of each icon are shown below:

![1031](img/1031.png)



![4bottom](img/4bottom.png)

